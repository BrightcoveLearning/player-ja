---
title: "Google アナリティクスの自己設定"
description: "このトピックでは、Brightcoveにこの処理を許可できない、またはさせない場合に、Brightcove Player の Google アナリティクス プラグインを設定する方法について説明します。"
parent: "general"
---
<h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <aside class="bcls-aside bcls-aside--warning">以下の <strong>重要な</strong> 項目に注意して下さい:
      <ul>
        <li>Brightcove Player Google アナリティクス プラグインの最新バージョンであるバージョン 2.1.x 以降は、Google アナリティクス 4（「新バージョン」）をサポートします。</li>
        <li>このプラグインを使用するには、Brightcove Player バージョン 7.x およびそれ以降のバージョンを使用する必要があります。</li>
        <li>Googleユニバーサル アナリティクス（以下、旧バージョン）は、2023年7月1日にサービス終了となります。</li>
        <li>このドキュメントでは、ユニバーサルアナリティクスの設定に焦点を当てます。</li>
        <li><strong>Googleアナリティクス 4 またはGoogleアナリティクス 4 と ユニバーサル アナリティクスの両方を設定する場合</strong>は, <a href="/plugins/google-analytics-plugin.html">Google アナリティクス プラグイン</a> のドキュメントを参照して下さい。</li>
      </ul>
    </aside>

    <h2 id="Introduction">はじめに</h2>
    <p>設定作業は、以下の作業で構成されています:</p>
    <ul>
        <li>Brightcove Playerでサポートされているイベントの中からトラッキングしたいものを選択します。</li>
        <li>Google アナリティクス プラグインでサポートされているカスタム ディメンションから、使用したいものを選択します。</li>
        <li>In Google アナリティクスで、選択したカスタム ディメンションを作成します。</li>
        <li>Video Cloud Studio で, Google アナリティクス プラグイン用の設定情報を追加します。プレーヤーのJSONエディタを使用してこれを実行します。</li>
      </ul>
    </section>

    <section class="bcls-section">
        <h2 id="Select_events">イベントの選択</h2>
        <p>JSONの設定では、トラッキングしたいイベントをリストアップします。次のうち、どれをトラックングするかを決めます:</p>
        <ul>
          <li>player_load</li>
          <li>video_engagement</li>
          <li>video_impression</li>
          <li>play_request</li>
          <li>ad_start</li>
          <li>ad_end</li>
          <li>error</li>
          <li>video_view</li>
          <li>video_complete</li>
        </ul>
    
      </section>

      <section class="bcls-section">
        <h2 id="Select_custom_dimensions">カスタム ディメンションを選択</h2>
        <p>Google アナリティクス のデータで使用するカスタム ディメンションは8種類あり、その中から選択する事ができます。次のうちどれを使用するかを決めて下さい:</p>
        <ul>
          <li>bcvideo_account</li>
          <li>bcvideo_platform_version</li>
          <li>bcvideo_player</li>
          <li>bcvideo_range</li>
          <li>bcvideo_session</li>
          <li>bcvideo_tags</li>
          <li>bcvideo_video_duration</li>
          <li>bcvideo_video_seconds_viewed</li>
        </ul>
      </section>

  <section class="bcls-section">
    <h2 id="Create_custom_dimensions">カスタム ディメンションの作成</h2>
    <p>使用するカスタム ディメンションをそれぞれ作成する必要があります。Googleが提供するドキュメントの手順で、このプロセスを説明します: <a href="https://support.google.com/analytics/answer/2709829?hl=en">カスタム ディメンションとカスタム指標の設定と編集</a>.</p>
      <p>各カスタム ディメンションの作成時に、<strong>Scope</strong> を選択するように求められます。これらのカスタム ディメンションでは、<samp>Hit</samp> という値を使用します。また、各カスタム ディメンジョンを作成すると、このスクリーンショットに示すように、インデックス（シーケンス）番号がそれに関連付けられます:</p>
      <figure class="bcls-figure">
        <img class="bcls-image" src="/assets/images/general/ga-self-configure/custom-dimension-index.png" alt="custom dimension index">
      </figure>
      <p>JSON 設定にインデックス番号が必要なため、作成したカスタム ディメンションのテーブルを利用できるようにしておく必要があります。</p>
      <p>ディメンジョンを作成する際に、より親しみやすい名前を選択することができます。例えば、次のように考えてください:</p>
      <ul>
        <li><code translate="no">bcvideo_video_duration</code> のカスタム ディメンションを作成する際に、レポートに分かりやすい名前を使用したい為、単に <strong>Duration</strong> と名付ける事ができます。</li>
        <li>作成時、<strong>Duration</strong> に関連するインデックスは <code translate="no">7</code>です。</li>
        <li>JSON 設定では、次のように割り当てています:
          <pre><code class="language-json" translate="No">"bcvideo_video_duration": "dimension7"</code></pre>
          インデックス番号は、分かりやすい名前とプラグインの内部名称を関連付けています。
        </li>
      </ul>
      <figure class="bcls-figure">
        <img class="bcls-image" src="/assets/images/general/ga-self-configure/ga-dimension-names-index-google-drawings.png" alt="analytics dimension names index">
      </figure>
  </section>

  <section class="bcls-section">
    <h2 id="Add_JSON_configuration_to_player">プレーヤーに JSON 設定を追加する</h2>
    <p>使用するイベント、使用するカスタム ディメンションについて決定し、後者を作成しました。これで、プレーヤーの設定に含めるJSONを構成する準備が整いました。</p>
    <p>以下の例で、各論理的なコード群を説明する表を示します。このガイドに従って、独自のJSONを構成することができます。</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>ライン</th>
          <th>詳細</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>1,19</td>
          <td>プラグイン設定に関する全ての情報のためのJSONバウンダリ</td>
        </tr>
        <tr>
          <td>2-3</td>
          <td>プラグインとバージョンの定義</td>
        </tr>
        <tr>
          <td>4,18</td>
          <td>プラグインの <code translate="no">options</code> 定義のためのJSONバウンダリ</td>
        </tr>
        <tr>
          <td>5,11</td>
          <td>カスタム定義のJSONバウンダリ</td>
        </tr>
        <tr>
          <td>6-10</td>
          <td>作成したカスタム ディメンションを定義します。ディメンション名、コロン、 <strong>dimension</strong> という文字列の後に、カスタム定義の作成時に割り当てられたインデックス番号を使用します。</td>
        </tr>
        <tr>
          <td>12,16</td>
          <td>トラッキングすると選択したイベントのJSONバウンダリ</td>
        </tr>
        <tr>
          <td>13-15</td>
          <td>上記の<a href="#Select_events">イベントの選択</a> セクションから、トラッキングすると選択したすべてのイベント</td>
        </tr>
        <tr>
          <td>17</td>
          <td>Googleアナリティクスがユーザーに割り当てるトラッカーID</td>
        </tr>
      </tbody>
    </table>
    <pre class="line-numbers"><code class="language-json">{
  "registry_id": "@brightcove/videojs-bc-ga",
  "version": "1.x",
  "options": {
    "paramsToTrack": {
      "bcvideo_video_seconds_viewed": "dimension1",
      "bcvideo_range": "dimension2",
      "bcvideo_video_duration": "dimension3",
      "bcvideo_player": "dimension4",
      "bcvideo_session": "dimension5"
    },
    "eventsToTrack": {
      "video_impression": "Video Impression",
      "play_request": "Play Request",
      "video_engagement": "Video Engagement"
    },
    "tracker": "UA-123456-1"
  }
}</code></pre>
<p>JSON 設定が完成したら、次の手順で Brightcove Player の設定に貼り付けます:</p>
<ol class="bcls-tasklist-restart">
  <li>Video Cloud Studioにログインします。</li>
  <li><strong>PLAYERS</strong> モジュールに移動し、新しい設定を追加するプレーヤーをクリックします。</li>
  <li>左のナビゲーションから<strong>JSON エディター</strong> をクリックします。</li>
  <li>すでにプレーヤー用のプラグインが設定されている場合は、そのセクションにコードを貼り付けることができます。そうでない場合は、プラグイン用のJSONをいくつか追加する必要があります。いずれの場合も、記述した結果は以下のようになります。プレーヤー情報とJSONはユーザー独自のものを使用します（プラグイン用のJSON設定は黄色でハイライトされています）:
        <pre class="line-numbers"><code class="language-json">{
  "compatibility": true,
  "video_cloud": {
  "policy_key":
     "BCpkADawqM2w1K7269Ic17hjK0O2-ibj221pVcELpF1l5nZuiL-123456789123456789"
  },
  "player": {
    "template": {
      "name": "single-video-template",
      "version": "6.48.5"
    }
  },
  "plugins": [
    <span class="bcls-highlight">{
      "registry_id": "@brightcove/videojs-bc-ga",
      "version": "1.x",
      "options": {
        "paramsToTrack": {
          "bcvideo_video_seconds_viewed": "dimension1",
          "bcvideo_range": "dimension2",
          "bcvideo_video_duration": "dimension3",
          "bcvideo_player": "dimension4",
          "bcvideo_session": "dimension5"
        },
        "eventsToTrack": {
          "video_impression": "Video Impression",
          "play_request": "Play Request",
          "video_engagement": "Video Engagement"
        },
        "tracker": "UA-123456-1"
      }
    }</span>
  ]
}</code></pre>
      </li>
      <li>変更を保存してプレーヤーを公開すれば、Google アナリティクスプラグインの準備完了です。</li>
    </ol>
  </section>

</article>