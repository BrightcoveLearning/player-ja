---
title: プレイヤーイベント
parent: Coding Topics
description: In this topic, you will learn about the various types of events associated with Brightcove Player.
---
<article class="bcls-article">
  <h1>プレイヤーイベント</h1>
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Overview">概要</h2>
    <p>Brightcove Player には、動画の再生を制御するためのイベントが多数あります。このトピックでは、さまざまなタイプのイベントの概要について説明します。</p>
    <p>Brightcove Player イベントの完全なリストは、<a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#toc120__anchor">  Player メソッド/イベント API </a>リファレンスドキュメントを参照してください。このドキュメントは、プレーヤーを構成する実際のコードの一部であるイベントを反映しています。</p>
  </section>
  <section class="bcls-section">
    <h2 id="mediaevents">メディアイベント</h2>
    <p><a href="https://html.spec.whatwg.org/multipage/"> HTML Living Standard </a>ドキュメントは、HTML の開発と Web アプリケーションに必要な API に関する情報を提供する素晴らしいリソースです。これは、Webハイパーテキストアプリケーション技術ワーキンググループ (WHATWG) によって最新の状態に保たれている「生きている」ドキュメントです。WHATWG は、ウェブの進化に関心のある人々の成長するコミュニティです。</p>
    <p>Brightcove Playerは HTML フレームワーク上で動作し、<a href="https://html.spec.whatwg.org/multipage/embedded-content.html#mediaevents"></a>次のメディアイベントをトリガーします。</p>
    <p>このドキュメントでは、イベントに関連する用語をいくつか示します。</p>
    <h3>ブロックされた</h3>
    <p><a href="//dev.w3.org/html5/spec-preview/media-elements.html#paused-media-controller">再生が一時停止されている場合、MediaControl Liller はブロックされたと見なされます</a>。メディアエレメントは、そのコントローラがブロックされたメディアコントローラである場合、<a href="//dev.w3.org/html5/spec-preview/media-elements.html#blocked-media-controller">そのメディアエレメントはブロックされます</a>。</p>
    <h3>MediaController</h3>
    <p><a href="//dev.w3.org/html5/spec-preview/media-elements.html#mediacontroller"> MediaController </a>は、複数のメディアエレメントの再生を調整するオブジェクトです。</p>
    <h3>メディアエレメント</h3>
    <p><a href="//dev.w3.org/html5/spec-preview/media-elements.html#media-element"></a>メディアエレメントは、オーディオデータ、またはビデオおよびオーディオデータをユーザーに提示します。</p>
    <h3>奴隷化</h3>
    <p>デフォルトでは、各メディアエレメントにはがありません<code translate="No">MediaController</code>。メディアエレメントがに関連付けられている場合<code translate="No">MediaController</code>、<a href="//dev.w3.org/html5/spec-preview/media-elements.html#slaved-media-elements"></a>それらはコントローラにスレーブされていると言います。コントローラは、スレーブされた各メディアエレメントの再生レートとボリュームを変更します。スレーブされた要素の 1 つが予期せず停止した場合、コントローラは他のスレーブされた要素を停止します。</p>
  </section>
  <section class="bcls-section">
    <h2 id="bufferingandqosevents">バッファリングとQoSイベント</h2>
    <p>次に、バッファリングとサービス品質（QoS）に関連するイベントのサブセットを示します。</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th style="width: 40%;" scope="col"><strong>イベント名</strong> </th>
          <th style="width: 60%;" scope="col"><strong>説明</strong> </th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No"><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#event-media-progress">progress</a></code></td>
          <td>ビデオデータのバッファリング（ロード）</td>
        </tr>
        <tr>
          <td><code translate="No"><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#event-media-waiting">waiting</a></code></td>
          <td>要求された動画データを一時的に待っています</td>
        </tr>
        <tr>
          <td><code translate="No"><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#event-media-stalled">stalled</a></code></td>
          <td>バッファリングが停止しました</td>
        </tr>
        <tr>
          <td><code translate="No"><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#event-media-error">error</a></code></td>
          <td>ビデオの読み込み中にエラーが発生しました</td>
        </tr>
        <tr>
          <td><code translate="No"><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#event-media-playing">playing</a></code></td>
          <td>一時停止またはダウンロードの遅延後に再生が再開されました</td>
        </tr>
        <tr>
          <td><code translate="No"><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#event-media-ratechange">ratechange</a></code></td>
          <td>再生速度が変更されました（手動または自動の可能性があります）</td>
        </tr>
      </tbody>
    </table>
    <aside class="bcls-aside bcls-aside--warning">Edge Windows 10 では、<code translate="No">waiting</code>バッファリングがあるときにイベントは送出されません。</aside>
  </section>
  <section class="bcls-section">
    <h2 id="startupevents">スタートアップイベント</h2>
    <p>プレーヤーが初期化され、ビデオを再生する準備をしているときに発生するイベントが多数あります。これらは、発送される順番でここにリストされています。</p>
    <ul>
      <li>
        <p><code translate="No">loadstart</code>   :プレーヤーが初期化されたときにディスパッチされ、再生する新しいソースを提供する場合に再初期化された場合</p>
        <aside class="bcls-aside bcls-aside--tip"><code translate="No">loadstart</code>イベントはプレーヤーの準備が整う前に発生する可能性があるため、プレイヤーを呼び出す前に、このイベントのイベントリスナーを設定することをお勧めします。<code translate="No">ready()</code>関数。以下の CodePen を参照してください。</aside>
      </li>
      <li><code translate="No">loadedmetadata</code>:プレイヤーに初期期間とディメンション情報があるとき、つまり最初のセグメントがダウンロードされたときに送出されます。ライブ動画の場合、ユーザーが [再生] <code translate="No">loadedmetadata</code>をクリックするまでイベントは送出されません。これは、ユーザーが [再生] をクリックするまで、ライブ動画がセグメントのダウンロードを開始しないためです。</li>
      <li><code translate="No">loadeddata</code>   :プレーヤーが現在の再生位置でデータをダウンロードしたときに送出されます</li>
    </ul>
    <p>次の CodePen は、リッスンされ、送出されるスタートアップイベントを示しています。CodePen にマウスポインタを置いた場合、右下にある [ <strong>再実行] </strong>ボタンをクリックして、イベントが送出されたかを再度確認できます。コードを試す場合は、ヘッダーの [ <strong>  CODEPENで編集] </strong>リンクをクリックして、編集環境に移動します。<strong> JS </strong>ボタンをクリックすると、イベントリスナーを追加する JavaScript を確認できます。</p>
    <p data-height="400" data-theme-id="14832" data-slug-hash="jPrdQm" data-default-tab="result" data-user="bcls" class="codepen">ペンを見る<a href="http://codepen.io/team/bcls/pen/jPrdQm/">スタートアップイベントのデモ</a> Brightcove Learning Services（<a href="https://codepen.io/team/rcrooks1969"> @bcls</a>） オン<a href="http://codepen.io">CodePen</a>。</p>
    <script async src="//assets.codepen.io/assets/embed/ei.js"></script>
    <aside class="bcls-aside bcls-aside--information">注:このページを最初にロードすると、表示されない可能性があります。<code translate="No">loadstart</code>イベント。これは、CodePenがページに完全にレンダリングされる前にそのイベントがディスパッチされる可能性があるためです。[ <strong>再実行]</strong>ボタンをクリックすると、3 つのイベントがすべて送出されます。</aside>
    <h3>ready（）メソッド</h3>
    <p><code translate="No">ready()</code>メソッドはイベントのように思えるという点では二重人格を持っていますが、メソッドのように使います。このメソッド/イベントは、プレイヤーがコマンドを受信する準備ができていることを意味します。</p>
    <p><code translate="No">ready()</code>メソッドはイベントリスナーとは異なります。<code translate="No">ready</code>イベントが既に発生している場合は、<code translate="No">ready()</code>メソッドはすぐにです。Brightcove Player での開発の開始点として、次のような方法がよく見られます。</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function(){
  var myPlayer = this;
});</code></pre>
    <aside class="bcls-aside bcls-aside--tip">注:プレーヤーがビデオを再生するために再生技術（HTML から Flash など）を切り替える必要がある場合、新しい再生技術が起動して実行されると、<code translate="No">ready</code>メソッド/イベントハンドラが再実行されることを認識することが重要です。</aside>
    <h3>ready（）とon（ 'loadedmetadata'、...）</h3>
    <p>プレーヤーと対話したい場合は、<code translate="No">ready()</code>関数を正しく使用することに注意してください。たとえば、プログラムによってプラグインを追加する場合です。例えば使用など、すぐにビデオとやりとりしたい場合は<code translate="No">play()</code>、上記のコードスニペットが常に正しく動作するとは限りません。より良いアプローチは、<code translate="No">loadedmetadata</code>ビデオと対話するために耳を傾けることでしょう。例えば、</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').on('loadedmetadata',function(){
  var myPlayer = this;
  myPlayer.play();
});</code>   </pre>
    <p>要約すると、プレイヤーと対話するには、これを使用することができます：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready()</code></pre>
    <p>プレーヤーのビデオとすぐにやりとりしたい場合は、これを使用してください：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').on('loadedmetadata',function(){})</code></pre>
    <aside class="bcls-aside bcls-aside--information">注:<code translate="No">loadedmetadata</code>イベントが送出されるのを待たなければならない理由は、カタログが再生を試みる前にビデオを取得する時間があることを確認するためです。</aside>
  </section>
  <section id="fullscreenEvents">
    <h2 class="bcls-section">フルスクリーンイベント</h2>
    <p>フルスクリーンモードに切り替えたとき、またはフルスクリーンモードから切り替えると、<code translate="No">fullscreenchange</code>プレーヤーからイベントが放出されます。プレーヤーが全画面表示になるか通常モードに戻るかにかかわらず、同じイベントがブロードキャストされます。何が起こったのかを知ることが重要な場合は、<code translate="No">player.isFullscreen()</code>メソッドを使用してプレーヤーが現在フルスクリーンになっているかどうかを判断します。モード。</p>
    <p>以下のCodepenは、これを行う方法を示しています。</p>
    <p data-height="766" data-theme-id="14832" data-slug-hash="JGEdEd" data-default-tab="result" data-user="bcls" class="codepen">ペンを見る<a href="http://codepen.io/team/bcls/pen/JGEdEd/">BrightcovePlayerフルスクリーンイベント</a> Brightcove Learning Services（<a href="http://codepen.io/bcls"> @bcls</a>） オン<a href="http://codepen.io">CodePen</a>。</p>
    <script async src="//assets.codepen.io/assets/embed/ei.js"></script></section>
  <section class="bcls-section">
    <h2 id="adevents">広告イベント</h2>
    <p>広告ライブラリと機能をプレーヤーに含めるには、<a href="/plugins/advertising-ima3-plugin.html">  IMA3 </a>プラグインまたは<a href="/plugins/advertising-freewheel-plugin.html">  FreeWheel プラグインを使用できます</a>。これは、<a href="https://github.com/videojs/videojs-contrib-ads/blob/master/README.md">  videojs広告フレームワーク</a>（videojs-contrib-ads）の上に構築されています。これらの広告プラグインはどちらも、次の表に示す広告イベントをディスパッチできます。各イベントには、実装に固有の特定のイベントもあります。</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th style="width:35%">イベント</th>
          <th style="width:65%">次の場合に送出されます。</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>ads-request</td>
          <td>リクエストに応じて、広告データ。</td>
        </tr>
        <tr>
          <td>ads-load</td>
          <td>広告リクエストの後に広告データが利用可能になったとき。</td>
        </tr>
        <tr>
          <td>ads-ad-started</td>
          <td>広告の再生が開始されました。</td>
        </tr>
        <tr>
          <td>ads-ad-ended</td>
          <td>広告の再生が終了しました。</td>
        </tr>
        <tr>
          <td>ads-pause</td>
          <td>広告が一時停止されます。</td>
        </tr>
        <tr>
          <td>ads-play</td>
          <td>一時停止から広告が再開されます。</td>
        </tr>
        <tr>
          <td>ads-first-quartile</td>
          <td>広告は合計期間の 25% を再生しました。</td>
        </tr>
        <tr>
          <td>ads-midpoint</td>
          <td>広告は合計期間の 50% を再生しました。</td>
        </tr>
        <tr>
          <td>ads-third-quartile</td>
          <td>広告は合計期間の 75% を演奏しました。</td>
        </tr>
        <tr>
          <td>ads-click</td>
          <td>視聴者が再生中の広告をクリックした。</td>
        </tr>
        <tr>
          <td>ads-volumechange</td>
          <td>再生中の広告のボリュームが変更されました。</td>
        </tr>
        <tr>
          <td>ads-pod-started</td>
          <td>リニア広告ポッド（シーケンスされた広告のグループ）の最初の広告が開始されました。</td>
        </tr>
        <tr>
          <td>ads-pod-ended</td>
          <td>リニア広告ポッド（シーケンシングされた広告のグループ）の最後の広告が終了しました。</td>
        </tr>
        <tr>
          <td>ads-allpods-completed</td>
          <td>すべてのリニア広告の再生が終了しました。</td>
        </tr>
      </tbody>
    </table>
  </section>
  <section id="bc-catalog-error" class="bcls-section">
    <h2>BC-カタログエラーイベント</h2>
    <p>スクリプトブロックの normal <code translate="No">ready()</code>セクションでエラーを処理すると、問題が発生する可能性があります。例えば、<code translate="No">bc-catalog-error</code>プレイヤーが準備が整う前にイベントが送出されることがあり、<code translate="No">ready()</code>セクションでエラーを聞いた場合、エラーを処理することはできません。この問題は、ジオフィルタリングを使用している場合、ビデオが未公開の場合、ビデオがスケジュール範囲外である場合、または別のアカウントにある場合に発生する可能性があります。<code translate="No">bc-catalog-error</code>イベントを処理する詳細な説明と例については、<a href="/references/player-catalog.html">  Player </a>カタログのドキュメントを参照してください。</p>
  </section>
  <section id="progresstimeupdate" class="bcls-section">
    <h2>進捗状況とタイムアップデート</h2>
    <p><code translate="No">progress</code><code translate="No">timeupdate</code>イベントとイベントの違いについては、混乱が発生する可能性があります。Brightcove Player は HTML5 動画の上に構築され、その標準では、<code translate="No">progress</code>ブラウザーがデータをダウンロードしているときにイベントが送出されます。<code translate="No">timeupdate</code>イベントは、現在の再生位置が変更されたときに送出されます。</p>
    <p>これは、ブライトコーブのスマートプレーヤーのユーザにとって混乱を招く可能性があります。この API では、<code translate="No">progress</code>イベントはブライトコーブ Player API <code translate="No">timeupdate</code>での動作を行います。</p>
  </section>
  <section id="section-name" class="bcls-section">
    <h2>timeupdate リスナーの削除注意</h2>
    <p>場合によっては、イベントに追加したイベントリスナーを削除したい場合があります。<code translate="No">timeupdate</code>   ユースケースは、<a href="/code-samples/brightcove-player-sample-register-play-after-preview.html">Brightcove Playerのサンプルに示されています。</a>プレビュードキュメント後に再生するために登録しています。このような状況では、プレーヤーをある時間範囲で一時停止し、<code translate="No">timeupdate</code>時間チェックにを使用しているとします。その後、匿名イベントハンドラー関数定義を使用します。一時停止は 1 回だけなので、イベントリスナーを削除する必要があります。あなたは単にしたくありません：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">myPlayer.off('timeupdate');</code></pre>
    <p>もちろん、これにより、へのすべてのイベントリスナーが削除され<code translate="No">timeupdate</code>、他の問題の中には、タイムスクラバーが進むのを防ぐことができます。実行する必要があるのは、通常の関数定義構文（関数宣言）を使用して関数を作成し、イベントリスナーを1つだけ削除することです。ここに短縮されたコードを示します。</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No"> // Add the event handler
myPlayer.on('timeupdate', timeupdateHandler);

// Handle the event then remove JUST this event listener on timeupdate
function timeupdateHandler(evt) {
  ...
  myPlayer.off('timeupdate', timeupdateHandler);
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="analytics_events">アナリティクスイベント</h2>
    <p>イベントは、ビーコンが Analytics データコレクターに送信されるたびにトリガーされます。ビーコンや特定のビーコンを聞くことができます。</p>
    <h3>すべてのビーコンを聞く</h3>
    <p><code translate="No">analytics_request</code>イベントをリッスンすることで、送信されるすべての分析ビーコンを追跡できます。</p>
<pre class="line-numbers"><code class="language-javascript" translate="No">player.on('analytics_request', function(e) {
  videojs.log('sent a(n) ' + e.params.event + ' beacon!', e.params);
});</code></pre>
    <h3>特定のビーコンを聞く</h3>
    <p><code translate="No">analytics_request_<span class="bcls-input">{beacon_name}</span></code>イベントをリッスンすることで、送信された特定の分析ビーコンを追跡できます。</p>
    <p><code translate="No">{beacon_name}</code>は、データコレクターに送信されるプレーヤイベントの名前です。これらのイベントの完全なリストについては、「<a href="https://apis.support.brightcove.com/data-collection/references/reference.html#tag/Events">データ収集 API リファレンス」を参照してください</a>。</p>
    <h4>例</h4>
<pre class="line-numbers"><code class="language-javascript" translate="No">player.on('analytics_request_video_impression', function(e) {
  videojs.log('sent an impression beacon!', e.params);
});</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="No_support_for_method_chaining">メソッドチェーンはサポートされていません</h2>
    <p>バージョン 6 の Brightcove Player メソッドでは、イベントとの連鎖はサポートされなくなりました。これはあなたがこれを行うことができないことを意味します：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">player.on(event, function () {})
.on(event, function () {})
.on(event, function () {})
.on(event, function () {});</code></pre>
  </section>
</article>