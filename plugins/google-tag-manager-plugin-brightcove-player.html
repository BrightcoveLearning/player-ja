---
title: 'Brightcove Playerのための Googleタグマネージャープラグイン'
description: このトピックでは、Brightcove Player用の Google タグマネージャー (GTM) プラグインの使用方法を学習します。
parent: Plugins
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Overview">概要</h2>

    <p>
      Google タグマネージャ（GTM）プラグインを使用すると、GTM 機能をBrightcove Playerと統合できます。
    </p>

    <p>
      タグマネージャを使用すると、コードを使用せずにタグを追加および公開できます。タグマネージャはクライアント側のソリューションであるため、さまざまなマーケティングテクノロジーにわたってデータを収集できます。これにより、マーケティング担当者は、さまざまなコレクションポイントにわたってユーザーとプレーヤーのデータを収集する機能を提供できます。
    </p>

    <p>
      すでにGoogleアナリティクス、アドワーズやDoubleClickを使用している場合は、これらのツールとうまく統合されるため、Googleタグマネージャを使用することもできます。GTMは、多数の変数およびトリガーオプションを提供します。
    </p>
    <p>
      Google タグマネージャープラグインを使用すると、Google アナリティクスのダッシュボードを使用して Brightcove Player のイベントを追跡できます。以下のプレイヤーイベントを追跡できます。 
    </p>
    <ul>
      <li>
        Player load
      </li>
      <li>
        動画の印象
      </li>
      <li>
        動画表示回数
      </li>
      <li>
        ビデオエンゲージメント
      </li>
      <li>
        再生リクエスト
      </li>
      <li>
        動画の完了
      </li>
      <li>
        広告開始、広告終了などの高度なプレーヤーイベント
      </li>
      <li>
        再生体験を中断するエラー
      </li>
    </ul>

    <aside class="bcls-aside bcls-aside--tip">Google タグマネージャープラグインは Brightcove Player バージョン 6.36.5 以降でサポートされています。</aside>
  </section>

  <section class="bcls-section">
    <h2 id="Tag_management_terminology">タグ管理の用語</h2>

    <p>
      ここでは、Google タグマネージャ（GTM）を使用するときに遭遇する一般的な用語をいくつか挙げます。
    </p>

    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th style="width:15%">用語</th>
          <th style="width:85%">説明</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><strong>コンテナ</strong> </td>
          <td>
            タグ管理システムアカウントは、独自のタグと変数を持つ複数のコンテナ (プロファイル) を持つことができます。各コンテナは複数の環境を持つことができ、通常は開発、ステージング、および本番用にセットアップされます。
          </td>
        </tr>
        <tr>
          <td><strong>データレイヤ</strong> </td>
          <td>
            データレイヤーは、ウェブページのコード内に生息するデータのコレクションを指します。この JavaScript オブジェクトは、Web サイトからタグマネージャコンテナに情報を渡すために使用されます。その後、この情報を使用して変数を設定し、タグ設定でトリガーをアクティブにすることができます。
          </td>
        </tr>
        <tr>
          <td><strong>イベント</strong></td>
          <td>
            イベントは、レポートツールにデータを送信するために使用されるデータポイントです。これらは、ビデオの読み込みと再生に関連しています。
          </td>
        </tr>
        <tr>
          <td><strong>タグ</strong></td>
          <td>
            タグは、ユーザーインタラクションデータを収集するために Web ページに配置されるコードスニペットです。タグ管理システムでは、サイトにタグを追加するプロセスが簡素化され、タグ ID とタグイベントタイプのみを指定する必要があります。
          </td>
        </tr>
        <tr>
          <td><strong>タグマーケットプレイス</strong></td>
          <td>
            タグマーケットプレイステンプレートは、タグを展開するためのコードスニペットを提供します。これにより、必要なコード知識の量が減りますが、実装を成功させるには JavaScript と HTML に精通している必要があります。
          </td>
        </tr>
        <tr>
          <td><strong>トラッカー</strong></td>
          <td>
            トラッカーとは、データを収集、保存、Google タグマネージャーに送信するオブジェクトです。
          </td>
        </tr>
        <tr>
          <td><strong>トリガー</strong> </td>
          <td>
            トリガーは、タグコードをページに追加する必要があるタイミングを示します。これらはユーザー定義の条件です。
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <section class="bcls-section">
    <h2 id="Getting_started">はじめに</h2>
    <p>
      Google タグマネージャを設定するには、次の手順に従います。
    </p>
    <!-- <ul>
      <li>Define tag configurations for Google Analytics</li>
      <li>Define triggers to fire beacons</li>
      <li>
        <p>Create variables for events and custom dimensions</p>

        <aside class="bcls-aside bcls-aside--information">
          Make sure that each dimension's name and index number from Google Tag
          Manager matches the player's plugin JSON file.
        </aside>
      </li>
    </ul> -->

    <h3>ステップ</h3>
    <ol class="bcls-tasklist">
      <li>
        <a href="https://support.google.com/tagmanager/answer/6103696?hl=en">タグマネージャの設定とインストールについては、Google のドキュメントを参照してください</a>。
      </li>
      <li>
        <p>
         に<a href="https://tagmanager.google.com/#/home">タグマネージャー</a>、アカウントを作成するか、既存のアカウントを使用します。新しいアカウントを作成するには、<strong>アカウントを作成する</strong>ボタン。
        </p>
        <p>
          デフォルトでは、新しいアカウント用に新しいコンテナーが作成されます。各アカウント内に追加のコンテナーを作成できます。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Create account"
            src="/assets/images/plugins/google-tag-manager/create-account.png"
          />
          <figcaption class="bcls-caption--image">アカウントを作成</figcaption>
        </figure>
      </li>
      <li>
        <p>
         アカウント名やコンテナ名など、新しいアカウントページの値を入力します。ターゲットプラットフォームを選択します。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="New account information"
            src="/assets/images/plugins/google-tag-manager/new-account.png"
          />
          <figcaption class="bcls-caption--image">新しいアカウント情報</figcaption>
        </figure>
      </li>
      <li>
        [ <strong>作成] </strong>ボタンを選択します。
      </li>
      <!-- <li>
        Copy your Google Analytics account id for later use.
      </li>
      <li>
        Copy your Google Tag Manager tracking id for later use. This should be formatted as <code translate="No">GTM-XXXXXX</code>.
      </li> -->
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Reviewing_events_to_track">追跡するイベントの確認</h2>

    <p>以下の表を確認して、追跡するイベントを決定します。</p>

    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th style="width:15%">タイプ</th>
          <th style="width:20%">イベント</th>
          <th style="width:65%">説明</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>プレーヤーロード</td>
          <td><code translate="No">bcvideo_player_load</code></td>
          <td>
            プレーヤーがロードされ、再生の準備が整いました
          </td>
        </tr>
        <tr>
          <td>動画インプレッション</td>
          <td><code translate="No">bcvideo_video_impression</code></td>
          <td>
            ビデオがプレーヤーにロードされ、再生の準備が整いました
          </td>
        </tr>
        <tr>
          <td>ビデオ表示</td>
          <td><code translate="No">bcvideo_video_view</code></td>
          <td>
            自動再生またはユーザーの操作により、ビデオの再生が開始されました
          </td>
        </tr>
        <tr>
          <td>ビデオエンゲージメント</td>
          <td><code translate="No">bcvideo_video_engagement</code></td>
          <td>
            ユーザーが動画のタイムラインの秒の範囲を視聴しました。このイベントは、動画エンゲージメントを追跡するためのハートビートであり、ユーザーの操作と動画の長さによっては、再生中に何回も送信されます。
          </td>
        </tr>
        <tr>
          <td>リクエストを再生</td>
          <td><code translate="No">bcvideo_play_request</code></td>
          <td>
            再生は、ユーザーが明示的に再生ボタンをクリックするか、プラットフォームが自動再生シナリオで再生をトリガーしたときに自動的に開始されます。
          </td>
        </tr>
        <tr>
          <td>広告開始</td>
          <td><code translate="No">bcvideo_ad_start</code></td>
          <td>
            コントロールは、再生プラットフォームによって広告代理店に引き渡されます
          </td>
        </tr>
        <tr>
          <td>広告終了</td>
          <td><code translate="No">bcvideo_ad_end</code></td>
          <td>
            コントロールは広告代理店から再生プラットフォームに引き渡される
          </td>
        </tr>
        <tr>
          <td>エラー</td>
          <td><code translate="No">bcvideo_error</code></td>
          <td>
            致命的なエラーが発生し、再生体験が妨げられる
          </td>
        </tr>
        <tr>
          <td>ビデオ完了</td>
          <td><code translate="No">bcvideo_video_complete</code></td>
          <td>
            ビデオの再生が終了する
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <section class="bcls-section">
    <h2 id="Creating_variables_tags_&_triggers">変数、タグ、トリガーの作成</h2>
    <p>トラッキングするブライトコーブのイベントは、Google タグマネージャ（GTM）でイベントタグとして作成する必要があります。GTM からのイベント ID は、Players モジュール内で使用されます。これにより、ブライトコーブのイベントデータを GTM イベントに渡すことができます。</p>
    <p>イベントタグごとに、Google アナリティクスにイベントを送信するための GTM トリガーを作成する必要があります。次に、[GTM <strong>変数</strong> ] タブで、各イベントに関連付けられたカスタムパラメータを作成します。</p>
    
    <!-- <p>You can create Variables, Tags and Triggers in Google Tag Manager, as shown below, or you can <a href="#Importing_a_container_file_in_GTM">import a Container file in GTM</a>. </p> -->
    
    <h3>GTMへの変数の追加</h3>
    <p>ブライトコーブのパラメータは追加のデータを格納し、イベントとともに渡されます。記録されるすべての Brightcove パラメータは、Google タグマネージャで変数として作成する必要があります。パラメーター名はプレーヤー内で使用され、ブライトコーブのパラメーターを Google タグマネージャー変数に渡すことができます。</p>

    <p>
      Google タグマネージャで変数を作成するには、次の手順に従います。
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
         Google タグマネージャーアカウントにログインする
        </p>
      </li>
      <li>
        選択する<strong>変数</strong>左側のナビゲーションで。 
      </li>
      <li>
        <p>の中に<strong>ユーザー定義変数</strong>セクションで、<strong>新着</strong>ボタン。</p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Data Layer Variable"
            src="/assets/images/plugins/google-tag-manager/new-variable.png"
          />
          <figcaption class="bcls-caption--image">データレイヤー変数</figcaption>
        </figure>
      </li>
      <li>
        <p>
          にとって<strong>変数タイプ</strong>、 選択する<strong>データ層変数</strong>。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Data Layer Variable"
            src="/assets/images/plugins/google-tag-manager/variable-type.png"
          />
          <figcaption class="bcls-caption--image">データレイヤー変数</figcaption>
        </figure>
      </li>
      <li>
        <p>
          詳細を入力します。
        </p>
        <ul>
          <li>
            <strong>データレイヤー変数名</strong> -変数の名前
          </li>
          <li>
            <strong>データレイヤバージョン</strong> -バージョン 2
          </li>
        </ul>   
      </li>
      <li>
        <p>
          [ <strong>保存] を選択します</strong>。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Save variable"
            src="/assets/images/plugins/google-tag-manager/save-variable.png"
          />
          <figcaption class="bcls-caption--image">変数を保存</figcaption>
        </figure>
      </li>
      <li>
        <p>
          GTM 変数として作成できる Brightcove パラメータは次のとおりです。
        </p>
        <ul>
          <li>
            <strong>アカウント</strong> -ブライトコーブのアカウント名
          </li>
          <li>
            <strong>プレーヤー</strong> -プレイヤー ID
          </li>
          <li>
            <strong>プレイヤー名</strong> -プレイヤー名
          </li>
          <li>
            <strong>プラットフォームバージョン</strong> -プラットフォームバージョン番号
          </li>
          <li>
            <strong>セッション</strong> -セッション識別子
          </li>
          <li>
            <strong>ビデオ</strong> -ビデオ ID
          </li>
          <li>
            <strong>ビデオ名</strong> -ビデオの名前
          </li>
          <li>
            <strong>範囲</strong> -startSecond.. endSecond の形式で表示される秒の範囲
          </li>
          <li>
            <strong>動画の閲覧時間（秒</strong>）-視聴した秒数
          </li>
          <li>
            <strong>ビデオ再生時間</strong> -ビデオの再生時間（秒）
          </li>
          <li>
            <strong>動画の閲覧率</strong> -視聴した動画の割合
          </li>
          <li>
            <strong> Error Code </strong>：イベントに関連付けられたプラットフォーム固有のエラーコード
          </li>
          <li>
            <strong>ビデオマイルストーン</strong> -動画で完了マイルストーン (25%、50%、75%、100%)
          </li>
          <li>
            <strong>ビデオ再生ヘッド</strong> -イベントがトリガーされるビデオ内の時間
          </li>
          <li>
            <strong>国</strong> -ISO-3166 (アルファ2) 国コード。例:米国
          </li>
          <li>
            <strong>国名</strong> -人間が読める国名。例:米国
          </li>
          <li>
            <strong>地域</strong> -ISO-3166（アルファ 2）リージョンコード
          </li>
          <li>
            <strong>リージョン名</strong> -人間が読めるリージョン名
          </li>
          <li>
            <strong>都市</strong> -都市名
          </li>
          <li>
            <strong>ブラウザ</strong> -使用するブラウザのフルネームとバージョン
          </li>
          <li>
            <strong>ブラウザの種類</strong> -使用されるブラウザの共通名（クロム、エッジ、Firefoxなど）
          </li>
          <li>
            <strong>宛先</strong> -イベントを発生した URI
          </li>
          <li>
            <strong> Source </strong> -エンドユーザーを宛先に送信した URI
          </li>
          <li>
            <strong> Device Type </strong>：ユーザーエージェントが信頼できない場合に、イベントが発生したデバイスのOSを指定するオーバーライド
          </li>
          <li>
            <strong>デバイスOS </strong> -デバイスで使用されている OS の名前
          </li>
          <li>
            <strong>デバイスOSバージョン</strong> -デバイスが使用しているOSのバージョン
          </li>
        </ul>   
      </li>
      <li>
        <p>
          ユーザー定義変数は、GTMでは次のようになります。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="User-defined variables"
            src="/assets/images/plugins/google-tag-manager/user-defined-vars.png"
          />
          <figcaption class="bcls-caption--image">ユーザ定義変数</figcaption>
        </figure>
      </li>
    </ol>

    <h3>GTMへのタグの追加</h3>
    <p>トラッキングするイベントを決定したら、Google タグマネージャでタグを作成する必要があります。</p>

    <p>
      Google タグマネージャーでタグを作成するには、次の手順に従います。
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
         Google タグマネージャーアカウントにログインする
        </p>
      </li>
      <li>
        選択する<strong>タグ</strong>左側のナビゲーションで、を選択します<strong>新着</strong>ボタン。 
      </li>
      <li>
        <p>
          [ <strong>  Google アナリティクス] </strong>として [ <strong>タグタイプ] を選択します。ユニバーサル分析</strong>。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Tag configuration"
            src="/assets/images/plugins/google-tag-manager/tag-configuration.png"
          />
          <figcaption class="bcls-caption--image">タグ設定</figcaption>
        </figure>
      </li>
      <li>
        <p>
          タグの詳細を入力します。
        </p>
        <ul>
          <li>
            <strong>トラックタイプ</strong> - <strong>イベントに設定</strong> 
          </li>
          <li>
            <strong>カテゴリ</strong> -イベントカテゴリ変数
          </li>
          <li>
            <strong>アクション</strong> -イベントアクション変数
          </li>
          <li>
            <strong>ラベル</strong> -イベントラベル変数
          </li>
          <li>
            <strong>値</strong> -ニル
          </li>
          <li>
            <strong>非インタラクションヒット</strong> - <strong>  True に設定</strong> 
          </li>
          <li>
            <strong> Google アナリティクス設定</strong> -デフォルト設定
          </li>
          <li>
            <strong>トラッキングID </strong> -GAダッシュボードのトラッキングID。トラッキングID変数を選択します。
          </li>
        </ul>   
      </li>
      <li>
        <p>
          [詳細設定] に移動し、関連するカスタムディメンションインデックスとディメンション値を設定します。これらのインデックスは、Google アナリティクスにあるものと一致する必要があります。
        </p>
      </li>
      <li>
        <p>
          タグはGTMでは次のようになります。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Tags in GTM"
            src="/assets/images/plugins/google-tag-manager/tags-in-gtm.png"
          />
          <figcaption class="bcls-caption--image">GTMのタグ</figcaption>
        </figure>
      </li>
    </ol>

    <h3>GTM へのトリガーの追加</h3>
    <p>トラッキングするイベントごとに、Googleタグマネージャのトリガーも必要です。</p>

    <p>
      Google タグマネージャーでトリガーを作成するには、次の手順に従います。
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
         Google タグマネージャーアカウントにログインする
        </p>
      </li>
      <li>
        選択する<strong>トリガー</strong>左側のナビゲーションで、を選択します<strong>新着</strong>ボタン。 
      </li>
      <li>
        <p>
          を選択<strong>トリガータイプ</strong>なので<strong>カスタムイベント</strong>。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Trigger configuration"
            src="/assets/images/plugins/google-tag-manager/trigger-configuration.png"
          />
          <figcaption class="bcls-caption--image">トリガー構成</figcaption>
        </figure>
      </li>
      <li>
        <p>
          イベント名を入力します。
        </p>
      </li>
      <li>
        <p>
          トラッキングするイベントごとに、トリガーを作成します。
        </p>
      </li>
      <li>
        <p>
          トリガーはGTMでは次のようになります。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Triggers in GTM"
            src="/assets/images/plugins/google-tag-manager/triggers-in-gtm.png"
          />
          <figcaption class="bcls-caption--image">GTMでトリガー</figcaption>
        </figure>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Integrating_with_Brightcove">ブライトコーブとの統合</h2>
    <p>
      GTM を Brightcove Player と統合するには、Google タグマネージャプラグインをプレーヤーに追加します。
    </p>

    <h3>スタジオを使用する</h3>

    <p>
      次の手順では、Video Cloud Studio を使用してプラグインをロードする方法について詳しく説明します。
    </p>

    <ol class="bcls-tasklist-restart">
      <li>
        Video Cloud Studioで、<strong>プレイヤー</strong>モジュールを作成し、新しいプレーヤーを作成するか、プラグインを追加するプレーヤーを見つけます。
      </li>
      <li>プレーヤーのリンクを選択して、プレイヤーのプロパティを開きます。</li>
      <li>左側のナビゲーションメニューで [ <strong>プラグイン</strong> ] を選択します。</li>
      <li>
        <p>
          次に、[ <strong>プラグインを追加]</strong>ボタンを選択し、[ <strong>ブライトコーブプラグイン] を選択します</strong>。
        </p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Add a Plugin button"
            src="/assets/images/plugins/google-tag-manager/add-a-plugin.png"
          />
          <figcaption class="bcls-caption--image">
            [プラグインを追加] ボタン
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          を展開します<strong>Brightcoveプラグイン</strong>ドロップダウンして選択します<strong>Googleタグマネージャー</strong>。
        </p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Google Tag Manager plugin"
            src="/assets/images/plugins/google-tag-manager/gtm-plugin.png"
          />
          <figcaption class="bcls-caption--image">
            Google タグマネージャプラグイン
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          追跡するイベントとカスタムディメンションをプレイヤーに通知するには、JSON オブジェクトを作成して [ <strong>オプション (JSON)] </strong>テキストボックスに貼り付けます。
        </p>
        <p>
          フィールドの説明:
        </p>

        <ul>
          <li><code translate="No">tracker</code>   -Google タグマネージャのトラッキングID（GTM-XXXXXXX）</li>
          <li><code translate="No">eventsToTrack</code>   -追跡したいイベント</li>
          <li>
            <code translate="No">paramsToTrack</code>   -追跡したいカスタム寸法
          </li>
        </ul>
        <p>例を挙げます。</p>

        <pre class="line-numbers">
<code class="language-json" translate="No">{
  "tracker":"<span class="bcls-input">your Google Tag Manager id</span>",
	"paramsToTrack": {
    "bcvideo_video_seconds_viewed":"video_seconds_viewed",
    "bcvideo_video_playhead":"video_playhead",
    "bcvideo_account":"account",
    "bcvideo_player":"player",
    "bcvideo_player_name":"player_name",
    "bcvideo_video":"video",
    "bcvideo_video_name":"video_name",
	"bcvideo_session":"session",
    "bcvideo_platform_version":"platform_version",
	"bcvideo_range":"range",
    "bcvideo_video_duration":"video_duration",
    "bcvideo_video_percent_viewed":"video_percent_viewed",
    "bcvideo_error_code":"error_code",
    "bcvideo_video_milestone":"video_milestone",
    "bcvideo_destination":"destination"
  },
  "eventsToTrack": {
    "video_impression": "Video Impression",
	"video_view": "Video View",
	"video_complete": "Video Complete",
    "play_request": "Play Request",
    "video_engagement": "Video Engagement",
    "ad_start": "Ad Start",
    "ad_end": "Ad End",
    "player_load": "Player Load",
    "error": "Error"
  }
}</code></pre>

        <aside class="bcls-aside bcls-aside--tip">JSON オブジェクトのカスタムディメンションが Google アナリティクス内の名前とインデックスと一致していることを確認します。</aside>
      </li>
      <li>
        <p>
          [ <strong>保存]</strong>ボタンを選択します。これで、<strong> Googleタグマネージャー</strong>プレーヤーのプラグインのリストにプラグインが追加されました。
        </p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Save button"
            src="/assets/images/plugins/google-tag-manager/gtm-save.png"
          />
          <figcaption class="bcls-caption--image">[保存] ボタン</figcaption>
        </figure>
      </li>
      <li>
        プレーヤーを公開するには、[ <strong>公開と埋め込み] &gt; [変更を公開] を選択します</strong>。
      </li>
      <li>ダイアログを閉じるには、[ <strong>閉じる] を選択します</strong>。</li>
      <li>
        <p>
          <strong> MEDIA に戻り</strong>、Google タグマネージャ用に更新したばかりのプレーヤーを使用して、動画やプレイリストを公開します。
        </p>

        <p>
          プレイヤーがロードされ、ユーザーがプレイヤーと対話すると、指定されたイベントとパラメータが追跡されます。
        </p>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Creating_custom_dimensions">
      カスタム次元の作成
    </h2>
    <p>
      カスタムディメンションとは、Google アナリティクスで自分で作成する指標です。詳しくは、Google <a href="https://support.google.com/analytics/answer/2709828?hl=en"></a>のカスタムディメンションと指標に関するドキュメントを参照してください。
    </p>
    <p>
      Google スクリプトを使用すると、Google アナリティクスでカスタムディメンションを追加するプロセスを自動化できます。
    </p>

    <h3>ステップ</h3>
    <p>Google アプリスクリプトを使用してカスタムディメンションを作成するには、次の手順に従います。</p>
    <ol class="bcls-tasklist-restart">
      <!-- <li>
    Open the <a href="https://drive.google.com/file/d/1Boxem7n4UNy7IbofMTTw2bmsdviSIvbZ/view">custom app script</a>.
  </li> -->
    <li>
      グーグルにログインします。
    </li>
    <li>
      <p>
        に移動します<a href="https://script.google.com/home/start">GSuite開発者ハブ</a> AppsScriptの新しい空白のプロジェクトを選択します。
      </p>

      <figure class="bcls-figure">
        <img
          class="bcls-image--no-border"
          alt="Apps Script project"
          src="/assets/images/plugins/google-tag-manager/apps-script-project.png"
        />
        <figcaption class="bcls-caption--image">
          アプリスクリプトプロジェクト
        </figcaption>
      </figure>
    </li>
    <li>
      <p>
        選択する<strong>無題のプロジェクト</strong>プロジェクトに名前を付けます。
      </p>

      <figure class="bcls-figure">
        <img
          class="bcls-image--no-border"
          alt="Script editor"
          src="/assets/images/plugins/google-tag-manager/script-editor.png"
        />
        <figcaption class="bcls-caption--image">
          スクリプトエディタ
        </figcaption>
      </figure>
    </li>
    <li>
      <p>次のカスタムアプリスクリプトコードをエディターにコピーし、次の値を更新します。</p>
      <ul>
        <li>
          <code translate="No">accountId</code>   -Google アナリティクスのアカウント ID
        </li>
        <li>
          <code translate="No">webPropertyId</code>   -Google アカウントのトラッキングID
        </li>
        <li>
          <code translate="No">dimensions</code>   -追加するカスタムディメンション。現在のリストには、すべてのカスタム次元が含まれます。<code translate="No">bcvideo_</code>寸法の前にが付いていることに注目してください。これは、これらの変数と名前の競合がないことを確認するためです。
        </li>
      </ul>

        <pre class="line-numbers">
<code class="language-javascript" translate="No">//Set values for GA Account ID and web property ID to which you have to set custom dimensions.
var accountId='<span class="bcls-input">your account id</span>';
var webPropertyId='<span class="bcls-input">your tracking code</span>';
//Add required custom dimensions to be created to this list
var dimensions=<span class="bcls-highlight">['bcvideo_video_seconds_viewed','bcvideo_video_playhead','bcvideo_account','bcvideo_player','bcvideo_player_name','bcvideo_video','bcvideo_video_name','bcvideo_session','bcvideo_platform_version','bcvideo_range','bcvideo_video_duration',
'bcvideo_video_percent_viewed','bcvideo_error_code','bcvideo_milestone','bcvideo_destination'];</span>


//Function to create custom dimensions in GA
function createGACustomDimensions() {

  //This loop iterates through the custom dimensions in order to set the custom dimension scope, active values into our GA property
  for(var index=0;index&lt;dimensions.length;index++){
  var customDimensions ={
    'name': dimensions[index],
    'scope':'HIT',
    'active':true,
  }

  //This create a request to the new custom dimension
  Analytics.Management.CustomDimensions.insert(customDimensions,accountId,webPropertyId);

  // Pause for 1 second between adding each custom dimension, this ensure that the GA property has time
  // to process the request fully before moving to the next custom dimension.
  Utilities.sleep(1000)
  }
}</code></pre>

        <aside class="bcls-aside bcls-aside--tip">この例では、という名前のオブジェクトにディメンションを配置しています<code translate="No">customDimensions</code>。これらをデータレイヤー変数として追加するには、各変数名を次のように参照する必要があります。<code translate="No">customDimensions.{dimension}</code></aside>

        <!-- <aside class="bcls-aside bcls-aside--tip">The script should be configured to access the <a href="https://developers.google.com/analytics/devguides/reporting/core/v4">Google Analytics API</a> from the resource menu.</aside> -->
      </li>
      <li>
        <p>
          を交換してください<code translate="No">function myFunction(){}</code>以下に示すように、カスタムアプリスクリプトを使用したコードブロック。
        </p>

        <pre class="line-numbers">
<code class="language-javascript" translate="No">function myFunction() {

}</code></pre>
      </li>
      <li>
        プロジェクトを保存します。GoogleアナリティクスAPIを使用できるようにするには、プロジェクトを保存する必要があります。
      </li>
      <li>
        <p>
          Google Analytics APIを有効にするには、スクリプトエディタで[ <strong>リソース</strong> &gt;&gt; <strong>高度なGoogleサービス</strong>。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Advanced Google Services"
            src="/assets/images/plugins/google-tag-manager/advanced-services.png"
          />
          <figcaption class="bcls-caption--image">
            高度なグーグルサービス
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          次に、<strong>高度なGoogleサービスを見つけて</strong>、<strong>それをオンにします</strong>。選択する<strong>OK</strong>。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Google Analytics API"
            src="/assets/images/plugins/google-tag-manager/enable-gtm2.png"
          />
          <figcaption class="bcls-caption--image">
            グーグルアナリティクスAPI
          </figcaption>
        </figure>
      </li>
      <li>
        <p>アプリスクリプトを実行するには、<strong>実行</strong> &gt;&gt; <strong>関数を実行します</strong>、スクリプトを選択します。</p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Run script"
            src="/assets/images/plugins/google-tag-manager/run-script.png"
          />
          <figcaption class="bcls-caption--image">スクリプトを実行</figcaption>
        </figure>
      </li>
      <li>
        <p>承認ダイアログで、<strong>権限を確認する</strong>。</p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Authorization dialog"
            src="/assets/images/plugins/google-tag-manager/authorization-dialog.png"
          />
          <figcaption class="bcls-caption--image">認証ダイアログ</figcaption>
        </figure>
      </li>
      <li>
        <p>
          を選択<strong>許可する</strong>ボタン。
        </p>
         <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Allow permissions"
            src="/assets/images/plugins/google-tag-manager/allow-permissions.png"
          />
          <figcaption class="bcls-caption--image">アクセス許可を許可する</figcaption>
        </figure>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Viewing_custom_dimensions">
      カスタム次元の表示
    </h2>
    <p>
      Google アナリティクスでカスタムディメンションを表示するには、次の手順に従います。
    </p>

    <ol class="bcls-tasklist-restart">
    <li>
      Googleアナリティクスにログインします。
    </li>
    <li>
      <p>
       選択する<strong>管理者</strong>
      </p>
      <figure class="bcls-figure">
        <img
          class="bcls-image--no-border"
          alt="Analytics admin"
          src="/assets/images/plugins/google-tag-manager/analytics-admin.png"
        />
        <figcaption class="bcls-caption--image">
          分析管理者
        </figcaption>
      </figure>
    </li>
    <li>
      <p>
       クリック<strong>カスタム定義</strong>展開するには、を選択します<strong>カスタム寸法</strong>。
      </p>
      <figure class="bcls-figure">
        <img
          class="bcls-image--no-border"
          alt="Custom dimensions"
          src="/assets/images/plugins/google-tag-manager/custom-dimensions.png"
        />
        <figcaption class="bcls-caption--image">
          カスタム次元
        </figcaption>
      </figure>
    </li>
    <li>
      <p>
       カスタムディメンションとそれに関連するインデックスが表示されます。
      </p>
      <figure class="bcls-figure">
        <img
          class="bcls-image--no-border"
          alt="Dimensions and indices"
          src="/assets/images/plugins/google-tag-manager/dimensions-indices.png"
        />
        <figcaption class="bcls-caption--image">
          次元とインデックス
        </figcaption>
      </figure>
    </li>
    
    </ol>
  </section>

  <!-- <section class="bcls-section">
    <h2 id="Importing_a_container_file_in_GTM">Importing a container file</h2>

    <p>
     One way to add Variables, Tags and Triggers to Google Tag Manager is to import a JSON-formatted Container file. For details, see Google's <a href="https://support.google.com/tagmanager/answer/6106997?hl=en">Container export and import</a> document.
    </p>
    <h3>Steps</h3>
    <p>
      Follow these steps to import a Container file:
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
         In your JSON-formatted Container file, set the following values:
        </p>
        <ul>
          <li>
            <code translate="No">publicID</code> - Your GTM tracker ID (GTM-XXXXXX)
          </li>
          <li>
             <code translate="No">value</code> - Your GA tracker ID (UA-111111111-1)
          </li>
        </ul>
        <p>
          Snippet1 from an example Container file:
        </p>
        <pre class="line-numbers">
<code class="language-json" translate="No">...
&quot;container&quot;: {
   &quot;path&quot;: &quot;accounts/470123456/containers/13171830&quot;,
    &quot;accountId&quot;: &quot;470123456&quot;,
    &quot;containerId&quot;: &quot;13171830&quot;,
    &quot;name&quot;: &quot;solutions.brightcove.com&quot;,
    &quot;publicId&quot;: &quot;<span class="bcls-input">your GTM tracker ID</span>&quot;,
    &quot;usageContext&quot;: [
        &quot;WEB&quot;
    ],
    &quot;fingerprint&quot;: &quot;1571234567890&quot;,
    ...
</code></pre>
  <p>
      Snippet2 from an example Container file:
    </p>
    <pre class="line-numbers">
<code class="language-json" translate="No">...
{
    &quot;accountId&quot;: &quot;470123456&quot;,
    &quot;containerId&quot;: &quot;13171830&quot;,
    &quot;variableId&quot;: &quot;2&quot;,
    &quot;name&quot;: &quot;Google Analytics Settings&quot;,
    &quot;type&quot;: &quot;gas&quot;,
    &quot;parameter&quot;: [
        {
            &quot;type&quot;: &quot;TEMPLATE&quot;,
            &quot;key&quot;: &quot;trackingId&quot;,
            &quot;value&quot;: &quot;<span class="bcls-input">your GA tracker ID</span>&quot;
        }
    ],
    &quot;fingerprint&quot;: &quot;1573675830590&quot;
}
 ...
</code></pre>
      </li>
      <li>
        Log in to your GTM account.
      </li>
      <li>
        Select the <strong>Admin</strong> tab. 
      </li>
      <li>
        Select <strong>Import Container</strong>
      </li>
      <li>
        <p>
         Select <strong>Choose container file</strong>.
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Import container file"
            src="/assets/images/plugins/google-tag-manager/import-container.png"
          />
          <figcaption class="bcls-caption--image">Import container file</figcaption>
        </figure>
      </li>
      <li>
        Select <strong>Existing</strong> workspace.
      </li>
      <li>
        Preview the file and publish it. This will create the necessary Variables, Tags and Triggers in GTM.
      </li>
    </ol>
  </section> -->

  <section class="bcls-section">
    <h2 id="Events_and_parameters">イベントとパラメータ</h2>

    <p>
      Google タグマネージャに送信できるイベントとパラメータは、次のとおりです。
    </p>

    <h3>イベント</h3>

    <p>これらのイベントはプレイヤーからやってきます。</p>

    <ul>
      <li><code translate="No">player_load</code></li>
      <li><code translate="No">video_impression</code></li>
      <li><code translate="No">play_request</code></li>
      <li><code translate="No">video_view</code></li>
      <li>
        <code translate="No">video_engagement</code>
        <ul>
          <li><code translate="No">video_engagement</code>   -25% マイルストーン</li>
          <li><code translate="No">video_engagement</code>   -50% マイルストーン</li>
          <li><code translate="No">video_engagement</code>   -75% マイルストーン</li>
        </ul>
      </li>
      <li><code translate="No">ad_start</code>   </li>
      <li><code translate="No">ad_end</code>   </li>
      <li><code translate="No">error</code></li>
      <li><code translate="No">video_complete</code>   -100% マイルストーン</li>
    </ul>

    <p>
      動画の視聴率（<code translate="No">video_engagement</code>）は、次のように計算できます（Googleおよびアドビアナリティクスの video_engagement イベントに似ています）。
    </p>

    <pre>
<code class="language-json" translate="No">Video watched percentage = duration the user actually watched / total video duration</code>   </pre>

    <p>
      たとえば、20 秒のビデオでは 25% のマイルストーンは以下の両方のケースで達成できます。
    </p>

    <ul>
      <li>ユーザーが0-5秒からウォッチする</li>
      <li>
        ユーザーは0-1秒から見て11秒にスキップして15秒目まで観る
      </li>
    </ul>

    <p>
      上記のいずれの場合も、ユーザーは5秒視聴したため、マイルストーンは 25% と報告されます。
    </p>

    <h3>パラメータ</h3>

    <p>これらのパラメータはあなたのプレーヤーから来ます。</p>

    <ul>
      <li><code translate="No">account</code></li>
      <li><code translate="No">player</code></li>
      <li><code translate="No">player_name</code></li>
      <li><code translate="No">video</code></li>
      <li><code translate="No">video_name</code>   </li>
      <li><code translate="No">video_duration</code></li>
      <li><code translate="No">range</code></li>
      <li><code translate="No">video_seconds_viewed</code></li>
      <li><code translate="No">session</code></li>
      <li><code translate="No">platform_version</code></li>
      <li><code translate="No">video_percent_viewed</code></li>
      <li><code translate="No">video_playhead</code>   </li>
    </ul>

    <h3>自動パラメータ</h3>

    <p>
      これらのパラメーターは Google タグマネージャーに自動的に送信されるため、JSON コードで指定する必要はありません。
    </p>

    <ul>
      <li><code translate="No">country</code></li>
      <li><code translate="No">country_name</code></li>
      <li><code translate="No">region</code></li>
      <li><code translate="No">region_name</code></li>
      <li><code translate="No">city</code></li>
      <li><code translate="No">browser</code></li>
      <li><code translate="No">browser_type</code></li>
      <li><code translate="No">destination</code></li>
      <li><code translate="No">source</code></li>
      <li><code translate="No">device_type</code></li>
      <li><code translate="No">device_os</code></li>
      <li><code translate="No">device_os_version</code></li>
    </ul>
  </section>

  <section class="bcls-section">
    <h2 id="Changelog">更新履歴</h2>

    <p>
      <a href="http://players.brightcove.net/release-notes/brightcove-player-google-tag-manager/index.html">Google タグマネージャプラグインのリリースノートを参照してください</a>。
    </p>
    <p>過去のリリースノートについては、ここの<a href="/plugins/changelog/google-tag-manager-plugin-changelog.html"> changelog を参照してください</a>。</p>
  </section>
</article>